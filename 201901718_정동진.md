**Genetic algorithm(유전 알고리즘)**
=============

#### 1.개요

두개의 변수에 대한 선형 또는 비선형 관계를 나타내는 회귀식을 유전 알고리즘을 이용하여 구하려고 한다.

#### 2.자료(변수)

자료는 [KOSIS 국가통계포털](http://kosis.kr/)에서 구한 2018년의 우리나라의 지역별 인구수와 1인 가구수를 이용했다(약 300개).

또한 경기도와 서울의 전체 인구수 데이터(각 동,구 별데이터가 아닌 전체데이터)그리고 전체 인구수는 값이 너무 커서 제외했다.

![값](https://user-images.githubusercontent.com/62733753/85732267-33005c00-b736-11ea-82c3-27da69043e91.png)



그리고 인구수 값을 그대로 쓰기는 값이 너무 커서 값을 1000으로 나누었다. 

1인가구수는 당연히 인구수가 클수록 많아지기 때문에 두 자료는 선형적인 관계를  1차식으로 가질 것 이다.

#### 3.선형 관계 식 구하기 

일단 1인가구 수를 x, 인구수y를 라고 한다.

그리고 식을 구하기 전에 1차식의 형태를 y=ax+b라고 가정한다.

그리고 b의 값을 결정하기위해 액셀에서 그래프를 구해보면 

![엑셀 그래프](https://user-images.githubusercontent.com/62733753/85711868-ad26e580-b722-11ea-8ef0-281af02c5d0a.png)

이러한 그래프가 나오게 된다.

여기서 b=0인것을 알 수 있다.

그럼 여기서 a에 알맞는 값을 구하기 위해서 유전 알고리즘을 이용할 것이다.

#### 4.유전 알고리즘 이용(선택연산)

일단 유전알고리즘을 이용하기전에 적합도를 (식의y값-원래 데이터값)의 제곱을 모두 더한 것을 적합도로 정한다.

일단 선택연산을 시행하면 a의 후보해를 4개 정도로 정한다.

여기서 값은 대충 30은 넘지 않으므로 (1<=a<=30)라하면 

대충 1,4,10,20로 정하면 각 적합도는 

106030132,40961401,5889805,229113785로 나온다 여기서 후보해가 선택되기위해 확률을 구해야하는데 여기서 적합도가 낮은 경우가 잘 선택되도록 일단 적합도/전체를 각각 구하고 그 값을 반대로 바꿔주는 연산을 하면 된다. 

여기서 적합도/전체를 각각 구하면 0.28,0.11,0.01,0.60이 나오고 이 값을 다시 반대로 정해 주면 

1은 0.11,4는 0.28,10은 0.60,20은 0.01으로 확률을 정해주고 선택을 해준다.

그러면 랜덤하게 선택해서 10이 두번 4는 한번 1이 한번이 나왔다고 가정한다.

#### 5.유전 알고리즘 이용(교차연산)

그 다음에는 교차연산을 시행한다.

교차연산은 책에서 나온 것과 같이 2진표현을 해준 후 서로의 값을 반으로 나눠 가져간다.

여기서 연산을 편하게 하기 위해서 원래는 5비트로 다 표현이 가능하지만 6비트로 표현한다.

각각 2진 표현으로 바꾸면 10은 001010,4는 000100,1은 000001이고 이를 10과4, 10과 1로교차해 주면

각각 10과 4에서 001100,000010 10과 1에서 001001,000010이 나온다 

#### 6.유전 알고리즘 이용(돌연변이 연산)

그 다음에는 돌연변이 연산을 시행한다.

여기서 돌연변이 확률을 결정해야 하는데 원래는 후보해의 이진 표현한 경우 비트수인 Length의 역수를 사용하지만, 여기서는 20이 최대이기 때문에 5비트 안으로 결정 되므로 20%인데 이러면 너무 확률이 높으므로 여기서는 그 보다 더 낮은 값인 10%로 돌연변이 확률을 결정했다.

이렇게 확률을 결정하면 이진수 값을 돌면서 돌연변이 확률만큼 이진수 값을 변화(돌연변이)시키면 된다.

확률을 10%로 설정하면 이진수에서 10개중 1개가 돌연변이가 생기므로 여기서는 5x4=20개의 비트를 가지므로 2곳에서 돌연변이가 생긴다.

여기서는 01100,00010,01001,00010 중에서 01100,00010에서 돌연변이가 발생해서 01000,00110로 변 했다고 가정한다.

그러면 01000,00110,01001,00010 즉, 8,6,9,2가 나오고 이를 후보해로 해서 다시 선택연산 부터 반복한다.

#### 7.결과

위의 과정을 반복해 나온 마지막의 4개의 후보해 중 적합도가 가장 낮은 것을 선택하면 된다.

위 과정을 반복하면 후보해가 적합도가 2932676로 가장 낮은 값인 9에 가까워져 식이 y=9x가 될 것이다. 

원래의 값과 y=9x로 그린 그래프를 비교해보면 

![최종 그래프](https://user-images.githubusercontent.com/62733753/85731694-b0779c80-b735-11ea-9606-0c28411901d8.png)

이렇게 유사하다는 것을 알 수 있다.(여기서 파란 점은 원래 인구수 이고 빨간 점은 1인가구 수를 y=9x에 대입한 값이다.)